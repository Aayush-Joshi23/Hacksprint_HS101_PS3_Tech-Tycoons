<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <title>Tech Tycoons</title>
</head>
<body onbeforeunload="delete.php">
    <header class="bg-purple-300 text-gray-700 body-font">
        <div class="container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center">
          <nav class="flex lg:w-2/5 flex-wrap items-center text-base md:ml-auto">
            <!--a class="mr-5 hover:text-gray-900">First Link</a>
            <a class="mr-5 hover:text-gray-900">Second Link</a>
            <a class="mr-5 hover:text-gray-900">Third Link</a>
            <a class="hover:text-gray-900">Fourth Link</a-->
          </nav>
          <a class="flex order-first lg:order-none lg:w-1/5 title-font font-medium items-center text-gray-900 lg:items-center lg:justify-center mb-4 md:mb-0">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-10 h-10 text-white p-2 bg-purple-500 rounded-full" viewBox="0 0 24 24">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
            </svg>
            <span class="ml-3 text-3xl">Tech Tycoons</span>
          </a>
          <div class="lg:w-2/5 inline-flex lg:justify-end ml-5 lg:ml-0">
            <!--button class="inline-flex items-center bg-gray-200 border-0 py-1 px-3 focus:outline-none hover:bg-gray-300 rounded text-base mt-4 md:mt-0">Button
              <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-1" viewBox="0 0 24 24"-->
                <path d="M5 12h14M12 5l7 7-7 7"></path>
              </svg>
            </button>
          </div>
        </div>
      </header>
<style>
  select.dropdown{
    visibility: visible;
  }
</style>
<?php
if (($_FILES['fileToUpload']['name']!="")){
        // Where the file is going to be stored
        $target_dir = "upload/";
        $file = $_FILES['fileToUpload']['name'];
        $temp_name = $_FILES['fileToUpload']['tmp_name'];
        $path = pathinfo($file);
        $path_temp = pathinfo($temp_name);
        $filename = $path['filename'];
        $filename_temp = $path_temp["filename"];
        $ext = $path['extension'];
        $ext_temp = $path_temp['extension'];
        $path_filename_ext = $target_dir.$filename.".".$ext;
        $output_u2 = shell_exec("rename $temp_name sheets.xlsx");
        $output_u1 = shell_exec("move C:\\xampp\\tmp\\sheets.xlsx D:\Projects\TechTycoons\HTML\upload");
      }
?>
<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
function upload() {
  $("#dropdown").load("names.txt");
  }

function drop(){
 var selected = document.getElementById("dropdown").value;
 var dest = "/pdfd/";
 dest = dest + selected + ".pdf";
 console.log(selected);
 if(selected == "pratik"){document.getElementById("pdfshow").src = dest;}
 else{document.getElementById("pdfshow").src = "about:none";}
}
function myFunction(){
  var x = document.getElementById("fileToUpload");
  var txt = "";
  if ('files' in x) {
    if (x.files.length == 0) {
      txt = "Select one or more files.";
    } else {
      for (var i = 0; i < x.files.length; i++) {
        txt += "<br><strong>" + (i+1) + ". file</strong><br>";
        var file = x.files[i];
        if ('name' in file) {
          txt += "name: " + file.name + "<br>";
        }
        if ('size' in file) {
          txt += "size: " + file.size + " bytes <br>";
        }
      }
    }
  } 
  else {
    if (x.value == "") {
      txt += "Select one or more files.";
    } else {
      txt += "The files property is not supported by your browser!";
      txt  += "<br>The path of the selected file: " + x.value; // If the browser does not support the files property, it will return the path of the selected file instead. 
    }
  }
  console.log(txt);
}
</script>
<iframe name = "hiddenframe" width="0" height="0" style = "display:none;" border = "0"></iframe>>
</body>
<section class="text-gray-700 body-font">
    <div class="container mx-auto flex px-5 py-24 md:flex-row flex-col items-center">
      <div class="lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center">
        <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900">Download your Report Card
          <br class="hidden lg:inline-block">Also share it on Linkedin
        </h1>
        <p class="mb-8 leading-relaxed">If you are a student- click on the drop down menu and then click on your name  </p>
        <p class="mb-8 leading-relaxed">If you are a Teacher and want to update the report cards- click on Upload </p>
		<div class="flex justify-center">
			<form class="lg:max-w-lg lg:w-full md:w-1/2 w-5/6" id = "upload_form" onsubmit="document.getElementById('upload_b').style.visibility = hidden" action="upload.php" target="hiddenframe" method="post" enctype="multipart/form-data">
				Select image to upload:
				<input type="file" name="fileToUpload" id="fileToUpload" onchange="setTimeout(upload,7000)">
				<!--input type="submit" value="Upload Image" name="submit"-->
			</form>
			
			<br>
		  <!--button class="ml-4 inline-flex text-gray-700 bg-gray-200 border-0 py-2 px-6 focus:outline-none hover:bg-gray-300 rounded text-lg">Login as Admin</button-->
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
              <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
            </div>
          </div>
          <br>
          <button id = "upload_b" class="inline-flex text-white bg-purple-500 border-0 py-2 m-0 px-6 focus:outline-none hover:bg-purple-600 rounded text-lg" form = "upload_form" type = "submit">Upload</button>
          <br>
          <div class="relative m-0">
            <select id = "dropdown" class="dropdown ml-0 appearance-none w-full text-white bg-purple-500 border border-0 hover:border-purple-500 px-5 py-3 pr-9 rounded shadow leading-tight focus:outline-none focus:shadow-outline" onchange='if(this.value != 0) { drop(); }'>
              <option value = "0">Upload Files</option>
            </select>


        </div>
        <div>
        <embed id = "pdfshow" class = "dropdown p-5 appearance-none w-50" name="AA8D488D843F5813EBB35895A585F6DF" style="position:absolute; left: 0; top: 10;" width="100%" height="100%" src="about:none" type="application/pdf" internalid="AA8D488D843F5813EBB35895A585F6DF">
        </div>
        </div>
      
      <div class="lg:max-w-lg lg:w-full md:w-1/2 w-5/6">
        <img class="object-cover object-center rounded" alt="hero" src="https://cdn.pixabay.com/photo/2016/01/19/17/53/writing-1149962__340.jpg">
      </div>
    <button id="noob" onclick="upload()">BUTTTTTTTTT</button>
    </div>

  </section>
</html>